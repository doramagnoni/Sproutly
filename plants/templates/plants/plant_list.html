{% extends 'base.html' %}

{% block content %}
    <div class="container mt-5"> 
        <h1>My Plants</h1>

        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Plant Name</th>
                    <th>Species</th>
                    <th>Description</th> 
                    <th>Watering Interval</th>
                    <th>Last Watered</th> 
                    <th>Light Requirements</th> 
                    <th>Fertilization Interval</th> 
                    <th>Last Fertilized</th> 
                    <th>Image</th> 
                    
                </tr>
            </thead>

            <tbody>
                {% for plant in page_obj %}
                    <tr>
                        <td>{{ plant.name }}</td>
                        <td>{{ plant.species }}</td>
                        <td>{{ plant.description }}</td>
                        <td>{{ plant.watering_interval }} days</td>
                        <td>
                            <input type="date" id="last_watered_{{ plant.id }}" name="last_watered_{{ plant.id }}" value="{{ plant.last_watered }}"> 
                        </td>
                        <td>{{ plant.light_requirements }}</td> 
                        <td>{{ plant.fertilization_interval }} days</td>  
                        <td>
                            <input type="date" id="last_fertilized_{{ plant.id }}" name="last_fertilized_{{ plant.id }}" value="{{ plant.last_fertilized }}"> 
                        </td>
                        <td>
                            {% if plant.image %}
                                <img src="{{ plant.image.url }}" alt="Picture of {{ plant.name }}" style="max-width: 100px;"> 
                            {% else %}
                                No image available
                            {% endif %}
                        </td> 
                        <td class="button-container"> 
                            <a href="{% url 'edit_plant' plant.id %}" class="btn btn-primary">Edit</a>
                            <a href="{% url 'delete_plant' plant.id %}" class="btn btn-danger" onclick="return confirm('Are you absolutely sure you want to delete this plant?');">Delete</a> 
                           </td> 
                    </tr>
                {% endfor %}
            </tbody>
        </table>

        <div class="pagination"> 
            {% if page_obj.has_previous %} 
                <a href="?page={{ page_obj.previous_page_number }}">Previous</a> 
            {% endif %}

            <span class="current">
                Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
            </span>

            {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}">Next</a>
            {% endif %}
        </div>
    </div>
{% endblock content %}
